/*!
 * Hibiko v2.1.1
 * https://mifitto.com
 *
 * Copyright (c) 2014 
 * Released under the MIT license
 *
 * Date: 2014-04-03
 */
var Hibiko=Hibiko||function(a){var b,c={};return b=function(b,c){this.target=b,this.targetOrigin=c,this.wpmAvailable="undefined"!=typeof a.postMessage,this.rpcs={},this.JSONMessageIdentifier=";;JSON;;",this.RPCMessageIdentifier=";;RPC;;",a.addEventListener("message",this.__onMessage.bind(this),!1)},b.prototype.postMessage=function(a){this.wpmAvailable&&("object"==typeof a&&a.rpName?a=this.RPCMessageIdentifier+JSON.stringify(a):"object"==typeof a&&(a=this.JSONMessageIdentifier+JSON.stringify(a)),this.target.postMessage(a,this.targetOrigin))},b.prototype.__onMessage=function(a){if(this.wpmAvailable&&a.origin===this.targetOrigin){var b=a.data;if(0===b.indexOf(this.JSONMessageIdentifier))return b=JSON.parse(b.replace(this.JSONMessageIdentifier,"")),this.messageCallback(b);if(0===b.indexOf(this.RPCMessageIdentifier)){if(b=JSON.parse(b.replace(this.RPCMessageIdentifier,"")),!this.rpcs[b.rpName])return;return this.rpcs[b.rpName].apply(null,b.rpParams)}return this.messageCallback(b)}},b.prototype.onMessage=function(a){this.wpmAvailable&&(this.messageCallback=a)},b.prototype.registerRp=function(a,b){this.wpmAvailable&&(this.rpcs[a]=b)},b.prototype.callRp=function(a,b){return this.wpmAvailable&&"undefined"!=typeof a&&"undefined"!=typeof b?void this.postMessage({rpName:a,rpParams:b}):!1},c.init=function(c,d){return a.postMessage?new b(c,d):!1},c.inIframe=function(){try{return a.self!==a.top}catch(b){return!0}},c}(window,document);