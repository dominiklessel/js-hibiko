/*!
 * Hibiko v2.0.0
 * https://mifitto.com
 *
 * Copyright (c) 2014 
 * Released under the MIT license
 *
 * Date: 2014-04-02
 */
var Hibiko=Hibiko||function(a){var b,c={};return b=function(a,b){this.target=a,this.targetOrigin=b,this.rpcs={},this.JSONMessageIdentifier=";;JSON;;",this.RPCMessageIdentifier=";;RPC;;"},b.prototype.postMessage=function(a){"object"==typeof a&&a.rpName?a=this.RPCMessageIdentifier+JSON.stringify(a):"object"==typeof a&&(a=this.JSONMessageIdentifier+JSON.stringify(a)),this.target.postMessage(a,this.targetOrigin)},b.prototype.__onMessage=function(a){if(a.origin===this.targetOrigin){var b=a.data;if(0===b.indexOf(this.JSONMessageIdentifier))return b=JSON.parse(b.replace(this.JSONMessageIdentifier,"")),this.messageCallback(b);if(0===b.indexOf(this.RPCMessageIdentifier)){if(b=JSON.parse(b.replace(this.RPCMessageIdentifier,"")),!this.rpcs[b.rpName])return;return this.rpcs[b.rpName].apply(null,b.rpParams)}return this.messageCallback(b)}},b.prototype.onMessage=function(b){this.messageCallback=b,a.addEventListener("message",this.__onMessage.bind(this),!1)},b.prototype.registerRp=function(a,b){this.rpcs[a]=b},b.prototype.callRp=function(a,b){return"undefined"==typeof a||"undefined"==typeof b?!1:void this.postMessage({rpName:a,rpParams:b})},c.init=function(a,c){return new b(a,c)},c}(window,document);